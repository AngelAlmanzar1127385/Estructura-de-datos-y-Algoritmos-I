#include <iostream>
using namespace std;


void hanoi(int n, char origen, char destino, char auxiliar) {
    if (n == 1) {
        cout << "Mover disco 1 de " << origen << " a " << destino << endl;
        return;
    }
    hanoi(n - 1, origen, auxiliar, destino);
    cout << "Mover disco " << n << " de " << origen << " a " << destino << endl;
    hanoi(n - 1, auxiliar, destino, origen);
}

int validar(string mensaje, string mensajeError) {

    int majinbuu;
    bool casimiroFortnite = true;

    while (casimiroFortnite) {

        cout << mensaje;  // Mostramos mensaje de entrada
        cin >> majinbuu;      // Leemos dato

        // Si hubo error de entrada o caracteres no válidos
        if (cin.fail() || cin.peek() != '\n') {
            cout << mensajeError << endl << endl;
            cin.clear();            // Limpiar estado de error
            cin.ignore(100, '\n');  // Ignorar lo que sobra en el buffer
            casimiroFortnite = true;          // Repetimos
        }

        else {

            casimiroFortnite = false; // Entrada válida
            return majinbuu;
        }
    }

    return 0;
}

int main()
{
    int dato, opcion;

    bool lebron = true;

    while (lebron)
    {
        cout << "\n:::: LAS TORRES DE HANOI::::\n";
        cout << "1. Insertar un nuevo nodo\n";     
        cout << "2. Salir\n";
       
        opcion = validar("Seleccione una opcion: ", "Ingrese una dato valido \n");


        switch (opcion)
        {
     
        case 1:
            dato = validar("Digite el numero de discos que va a tener la torre: ", "Ingrese dato valido\n");
            if (dato < 3)
            {
                cout << "Ingrese un dato valido\n";
                system("pause");
                break;
            }
            hanoi(dato, 'X', 'Y', 'Z');
            
            system("pause");
            break;
        
        case 2:
            cout << "Gracias por utilizar el programa." << endl;
            lebron = false;
            system("pause");
            break;

        default:
            cout << "Elija una opcion valida \n";
            system("pause");
            break;
        }
        system("cls");
    }
}
